#include <iostream>
#include <fstream>
#include <string>
using namespace std;
const string dataFile= " wash_data.txt"; //insisialisasi datafile txt sebagai memori atau penyimpanan
const int totalhari= 7;   // total hari sebagai batas input mingguan

//inisialisasi variabel haridata dengan struct yang berisi array jumlah pakaian dan cuaca
//array ini digunakan untuk menampung inputan dari user
struct HariData {
int jumlahpakaian;
string cuaca;
};

  //insisialisasi variabel untuk memberi nilai awal pada sisa pakaian minggulalu
int sisaMingguLalu= -1;   //nilai= -1, dibuat sekecil mungkin agar saat memulai input hari ke-1 , sisa pakaian pada datafile dianggap masih kosong

//fungsi load data untuk memuat inputan (membuka dan membaca) datafile secara berulang
void loadData(HariData data[], int &hariSekarang) {
    ifstream file(dataFile);

    if (!file.is_open()) {
        hariSekarang = 1;
        for (int i = 0; i < totalDays; i++) {
            data[i].pakaian = 0;
            data[i].cuaca = "-";
        }
        return;    //memberhentikan fungsi pada hari pertama karena datafile masih kosong
    }

    file >> hariSekarang;
    for (int i = 0; i < totalDays; i++) {
        file >> data[i].pakaian >> data[i].cuaca;
    }

    file.close();  //menutup datafile
}

void saveData(HariData data[], int hariSekarang) {
    ofstream file(dataFile);          // Membuka file untuk ditulis
    file << hariSekarang << endl;     // Simpan hari saat ini ke dalam file

    // Untuk menyimpan jumlah pakaian dan cuaca tiap hari ke file
    for (int i = 0; i < totalDays; i++) {
        file << data[i].pakaian << " " << data[i].cuaca << endl;
    }

    file.close();                    
}
// Untuk memberikan saran sesuai dengan kondisi yang telah ditetukan
string saranCuci(const HariData &hari) {
    if (hari.cuaca == "hujan")
        return "Hari hujan, disarankan TIDAK mencuci.";
    else if (hari.pakaian >= 10)
        return "Pakaian sudah menumpuk, disarankan mencuci.";
    else
        return "Pakaian masih sedikit, boleh mencuci atau menunda.";
}
